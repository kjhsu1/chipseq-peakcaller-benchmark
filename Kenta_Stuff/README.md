# Kenta_Stuff Overview

This directory contains Kenta's scripts and data for generating synthetic CHIP-seq reads and running peak calling pipelines. The files are organised into a few main folders:

- **Bowtie2_Stuff** – Bowtie2 index files used for alignment.
- **Generated_Data** – output from the pipeline including FASTA reads, alignments and peak calls.
- **Genomes** – input genome FASTA files.
- **Scripts** – Python scripts for genome generation, read simulation and calling peaks. The `peak_caller_pipeline` subfolder holds the end‑to‑end pipeline.
- **chipseq_pipeline** – Snakemake workflow for simulating reads, aligning and calling peaks.
- **AGENTS.md** – coding standards for this project.

## Scripts

The `Scripts` folder contains several utilities:

- `chip_seq.py` – generates synthetic CHIP‑seq reads with configurable coverage and peak parameters.
- `random_genome_generator.py` – creates small random genomes for testing.
- `run_chip_seq_all_coverages.py` – runs `chip_seq.py` for a list of coverages.
- `peak_caller_pipeline/` – pipeline that aligns reads with bowtie2, converts SAM to sorted and indexed BAM and calls peaks with MACS2. Key components are:
  - `pipeline.py` – orchestrates the whole process.
  - `sam_to_bams.py` – converts a SAM file to BAM, sorted BAM and index.
  - `bam_to_peaks_called.py` – calls peaks using MACS2 on a pair of BAM files.
  - `run_pipeline_all_combs.py` – runs the pipeline on all combinations of experiment and control FASTAs.

Utility modules such as `LIB.py` and `genome_size.py` provide helper functions. Most scripts use `argparse` for command line arguments and follow the coding conventions documented in `instructions.md`.

## Chipseq Pipeline

The Snakemake workflow previously located in `../snakemake_stuff/chipseq_pipeline` now lives in this directory under `chipseq_pipeline/`. The workflow uses three separate conda environments stored in `chipseq_pipeline/envs`:

- `sim.yml` – packages for read simulation (python, hydra-core, mlflow and pandas).
- `align.yml` – tools for alignment (python, bowtie2 and samtools).
- `peak.yml` – tools for peak calling (python and macs2).

## Data Layout

`Generated_Data` is divided into subdirectories:

- `Reads_FASTA` – simulated read FASTA files for both experiment and control samples.
- `Alignments` – SAM and BAM outputs generated by the pipeline.
- `peaks_called` – MACS2 narrowPeak, summits and xls files for each coverage combination.

This structure keeps inputs and results separate from the scripts so that the pipeline can be rerun with different parameters.
